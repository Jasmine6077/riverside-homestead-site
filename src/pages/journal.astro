---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getJournalPosts } from "../lib/notion";

const posts = await getJournalPosts();
---

<BaseLayout title="Journal | Riverside Homestead">
  <section class="journalPageHero journalHeroClean">
    <div class="container journalPageHeroInner">
      <h1 class="journalPageTitle">Journal</h1>
      <div class="journalPageDash" aria-hidden="true"></div>
      <p class="journalPageIntro">
        A living space for updates, reflections, and little moments.
      </p>
    </div>
  </section>

  <section class="journalFeed">
    <div class="container journalFeedInner">

      {posts.length > 0 ? (
        <>
          <div class="journalCardsGrid">
            {posts.map((p) => (
              <article class="journalEntryCard">
                <div class="journalEntryMeta">
                  <span class="journalEntryDate">{p.date}</span>
                </div>
                <h3 class="journalEntryTitle">{p.title}</h3>
                <p class="journalEntrySummary">{p.summary}</p>

                <a class="journalReadMore" href={`/journal/${p.slug}`}>
                  Read →
                </a>
              </article>
            ))}
          </div>
        </>
      ) : (
        <div class="journalEmptyCard">
          <h3>Nothing here yet</h3>
          <p>Once your mom checks “Published” on a Notion entry, it will show here.</p>
        </div>
      )}
    </div>
  </section>
</BaseLayout>